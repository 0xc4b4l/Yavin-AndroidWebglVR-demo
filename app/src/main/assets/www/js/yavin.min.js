function init(){function e(t){t.alpha&&(controls=new THREE.DeviceOrientationControls(camera,!0),controls.connect(),controls.update(),renderer.domElement.addEventListener("click",fullscreen,!1),window.removeEventListener("deviceorientation",e,!0))}renderer=new THREE.WebGLRenderer({antialias:!0}),renderer.setSize(window.innerWidth,window.innerHeight),scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(90,window.innerWidth/window.innerHeight,.01,1e5),camera.position.set(-1e3,15,300),scene.add(camera),effect=new THREE.StereoEffect(renderer),clock=new THREE.Clock,controls=new THREE.OrbitControls(camera,renderer.domElement),controls.target.set(camera.position.x+.15,camera.position.y,camera.position.z),controls.noPan=!0,controls.noZoom=!0,window.addEventListener("deviceorientation",e,!0),dirLight=new THREE.DirectionalLight(15647642,1),dirLight.position.set(-100,100,50),scene.add(dirLight),dirLight2=new THREE.DirectionalLight(15921906,1),dirLight2.position.set(500,500,0),scene.add(dirLight2);var t=new THREE.AmbientLight(13562623);scene.add(t);var n=new THREE.ShaderMaterial({uniforms:{c:{type:"f",value:.02},p:{type:"f",value:6},glowColor:{type:"c",value:new THREE.Color(16756224)},viewVector:{type:"v3",value:camera.position}},vertexShader:document.getElementById("vertexShader").textContent,fragmentShader:document.getElementById("fragmentShader").textContent,side:THREE.FrontSide,blending:THREE.AdditiveBlending,transparent:!0}),r=new THREE.ShaderMaterial({uniforms:{c:{type:"f",value:.02},p:{type:"f",value:6},glowColor:{type:"c",value:new THREE.Color(46074)},viewVector:{type:"v3",value:camera.position}},vertexShader:document.getElementById("vertexShader").textContent,fragmentShader:document.getElementById("fragmentShader").textContent,side:THREE.FrontSide,blending:THREE.AdditiveBlending,transparent:!0}),i=new THREE.ShaderMaterial({uniforms:{c:{type:"f",value:.02},p:{type:"f",value:6},glowColor:{type:"c",value:new THREE.Color(16711680)},viewVector:{type:"v3",value:camera.position}},vertexShader:document.getElementById("vertexShader").textContent,fragmentShader:document.getElementById("fragmentShader").textContent,side:THREE.FrontSide,blending:THREE.AdditiveBlending,transparent:!0});textureMap=THREE.ImageUtils.loadTexture("img/deathstar.jpg");var a=new THREE.MeshPhongMaterial({map:textureMap}),o=new THREE.SphereGeometry(160,60,40);mesh=new THREE.Mesh(o,a),mesh.position.z=-300,mesh.position.x=-180,mesh.rotation.y=300,scene.add(mesh),mesh2Map=THREE.ImageUtils.loadTexture("img/yavin.png");var s=new THREE.SphereGeometry(8800,60,40),c=new THREE.MeshLambertMaterial({map:mesh2Map});mesh2=new THREE.Mesh(s,c),mesh2.position.z=500,mesh2.position.x=16500,scene.add(mesh2);var d=new THREE.Mesh(s.clone(),n.clone());d.position.z=500,d.position.x=16500,d.scale.multiplyScalar(1.1),scene.add(d),mesh3Map=THREE.ImageUtils.loadTexture("img/mustafar.jpg");var h=new THREE.SphereGeometry(3e3,60,40),m=new THREE.MeshPhongMaterial({map:mesh3Map});mesh3=new THREE.Mesh(h,m),mesh3.position.z=500,mesh3.position.x=-15900,scene.add(mesh3),mesh4Map=THREE.ImageUtils.loadTexture("img/naboo.jpg");var E=new THREE.SphereGeometry(2510,60,40),l=new THREE.MeshLambertMaterial({map:mesh4Map});mesh4=new THREE.Mesh(E,l),mesh4.position.z=15900,mesh4.position.x=-1e3,scene.add(mesh4),mesh5Map=THREE.ImageUtils.loadTexture("img/kamino.jpg");var u=new THREE.SphereGeometry(150,60,40),g=new THREE.MeshLambertMaterial({map:mesh5Map});mesh5=new THREE.Mesh(u,g),mesh5.position.z=-600,mesh5.position.x=-600,scene.add(mesh5),mesh6Map=THREE.ImageUtils.loadTexture("img/pandora.jpg");var p=new THREE.SphereGeometry(110,60,40),f=new THREE.MeshLambertMaterial({map:mesh6Map});mesh6=new THREE.Mesh(p,f),mesh6.position.z=-500,mesh6.position.x=-1600,scene.add(mesh6);var w=new THREE.Mesh(u.clone(),r.clone());w.position.z=-600,w.position.x=-600,w.scale.multiplyScalar(1.1),scene.add(w);var T=new THREE.Mesh(p.clone(),r.clone());T.position.z=-500,T.position.x=-1600,T.scale.multiplyScalar(1.1),scene.add(T);var v=new THREE.Mesh(h.clone(),i.clone());v.position.z=500,v.position.x=-15900,v.scale.multiplyScalar(1.45),scene.add(v),bg2Map=THREE.ImageUtils.loadTexture("img/bg2.jpg");var y=new THREE.SphereGeometry(3e4,60,40),R=new THREE.MeshBasicMaterial({map:bg2Map});skyBox=new THREE.Mesh(y,R),skyBox.scale.set(-1,1,1),skyBox.rotation.x=-90,skyBox.rotation.z=-80,scene.add(skyBox);var H=new THREE.LoadingManager;H.onProgress=function(e,t,n){console.log(e,t,n)};var x=new THREE.Texture,M=new THREE.Texture,b=new THREE.Texture,z=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log(Math.round(t,2)+"% downloaded")}},S=function(e){},I=new THREE.ImageLoader(H);I.load("img/color_0.jpg",function(e){x.image=e,x.needsUpdate=!0});var L=new THREE.ImageLoader(H);L.load("img/dark_fighter_6_color.png",function(e){M.image=e,M.needsUpdate=!0});var j=new THREE.ImageLoader(H);j.load("img/space_cruiser_4_color.png",function(e){b.image=e,b.needsUpdate=!0});var I=new THREE.OBJLoader(H);I.load("obj/SpaceCraft.obj",function(e){fighter=e,fighter.traverse(function(e){e instanceof THREE.Mesh&&(e.material.map=x)}),fighter.position.y=150,fighter.position.z=-3500,fighter.position.x=-1e3,fighter.scale.set(4.5,4.5,4.5),fighter.rotation.y=50.2,scene.add(fighter),tween1=fighter1Tween(fighter)},z,S),I.load("obj/SpaceCraft.obj",function(e){fighter2=e,fighter2.traverse(function(e){e instanceof THREE.Mesh&&(e.material.map=x)}),fighter2.position.y=140,fighter2.position.z=-3500,fighter2.position.x=-1e3,fighter2.scale.set(4.5,4.5,4.5),fighter2.rotation.y=50.2,scene.add(fighter2),tween2=fighter2Tween(fighter2)},z,S),I.load("obj/dark_fighter_6.obj",function(e){fighter3=e,fighter3.traverse(function(e){e instanceof THREE.Mesh&&(e.material.map=M)}),fighter3.scale.set(4,4,4),fighter3.rotation.y=257.6,scene.add(fighter3),tween3=fighter3Tween(fighter3)},z,S),I.load("obj/dark_fighter_6.obj",function(e){fighter4=e,fighter4.traverse(function(e){e instanceof THREE.Mesh&&(e.material.map=M)}),fighter4.scale.set(4,4,4),fighter4.rotation.y=257.6,scene.add(fighter4),tween4=fighter4Tween(fighter4)},z,S),I.load("obj/dark_fighter_6.obj",function(e){fighter5=e,fighter5.traverse(function(e){e instanceof THREE.Mesh&&(e.material.map=M)}),fighter5.scale.set(4,4,4),fighter5.rotation.y=257.6,scene.add(fighter5),tween5=fighter5Tween(fighter5)},z,S),I.load("obj/space_cruiser_4.obj",function(e){cruiser=e,cruiser.traverse(function(e){e instanceof THREE.Mesh&&(e.material.map=b)}),cruiser.scale.set(15,15,15),cruiser.rotation.y=260.75,scene.add(cruiser),tween0=cruiserTween(cruiser)},z,S),document.body.appendChild(renderer.domElement)}function cruiserTween(e){var t=new TWEEN.Tween({x:-8e3,y:100,z:550}).to({x:8e3,y:120,z:550},6e4).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function(){e.position.set(this.x,this.y,this.z)}).repeat(1/0).start();return t}function fighter1Tween(e){var t=new TWEEN.Tween({x:-1e3,y:140,z:-3500}).to({x:-1e3,y:170,z:3500},55e3).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function(){e.position.set(this.x,this.y,this.z)}).repeat(1/0).start();return t}function fighter2Tween(e){var t=new TWEEN.Tween({x:-1e3,y:0,z:-3500}).to({x:-1e3,y:-140,z:3500},62e3).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function(){e.position.set(this.x,this.y,this.z)}).repeat(1/0).start();return t}function fighter3Tween(e){var t=new TWEEN.Tween({x:5e3,y:-100,z:480}).to({x:-5e3,y:0,z:480},4e4).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function(){e.position.set(this.x,this.y,this.z)}).repeat(1/0).start();return t}function fighter4Tween(e){var t=new TWEEN.Tween({x:5e3,y:0,z:150}).to({x:-5e3,y:-100,z:150},4e4).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function(){e.position.set(this.x,this.y,this.z)}).repeat(1/0).start();return t}function fighter5Tween(e){var t=new TWEEN.Tween({x:5e3,y:0,z:850}).to({x:-5e3,y:-100,z:850},4e4).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function(){e.position.set(this.x,this.y,this.z)}).repeat(1/0).start();return t}function animate(){time=clock.getElapsedTime(),mesh.rotation.y-=.03,mesh2.rotation.y+=.003,mesh3.rotation.y-=.02,mesh4.rotation.y+=.02,mesh5.rotation.y-=.02,mesh6.rotation.y+=.02,requestAnimationFrame(animate),TWEEN.update(),update(clock.getDelta()),render(clock.getDelta())}function resize(){var e=window.innerWidth,t=window.innerHeight;camera.aspect=e/t,camera.updateProjectionMatrix(),renderer.setSize(e,t),effect.setSize(e,t)}function update(e){resize(),camera.updateProjectionMatrix(),controls.update(e)}function render(e){effect.render(scene,camera)}function fullscreen(){document.body.requestFullscreen?document.body.requestFullscreen():document.body.msRequestFullscreen?document.body.msRequestFullscreen():document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.webkitRequestFullscreen&&document.body.webkitRequestFullscreen()}var tween0,tween1,tween2,tween3,tween4,tween5,moveVector,scene,camera,effect,renderer,clock,dirLight,dirLight2,time,skyBox,mesh,mesh3,mesh4,mesh5,mesh6,moon,textureMap,moonMap,bg2Map,mesh2Map,mesh3Map,mesh4Map,mesh5map,mesh6map,fighter,fighter2,fighter3,fighter4,fighter5,cruiser,controls;init(),animate();